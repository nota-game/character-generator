var $e=Object.defineProperty;var Pe=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var C=(e,t,n)=>(Pe(e,typeof t!="symbol"?t+"":t,n),n);var P=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ae(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(t,r);return new s}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}const Ie={},_e=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"})),Ce=Ae(_e);var $={},Q={},H={},w={};Object.defineProperty(w,"__esModule",{value:!0});w.visitor=w.filterUndefined=w.delay=w.waitAll=w.makePromise=void 0;const Me=Ce;function ke(e,t){return new Promise(n=>e(n)).catch(n=>{throw console.error("There was an error with the promise"),Error("There was an error with the promise")}).then(n=>n)}w.makePromise=ke;function Le(e){return X(e,void 0)}w.waitAll=Le;function q(e){if(Array.isArray(e))e.forEach(t=>q(t));else if(typeof e=="object"&&e["#visited"]){delete e["#visited"];for(const t of Object.keys(e))q(e[t])}}async function X(e,t){if(typeof t>"u"){const n=await X(e,0);return q(n),n}if((0,Me.isPromise)(e))return await X(await e,t+1);if(Array.isArray(e))return await Promise.all(e.map(i=>X(i,t+1)));if(typeof e=="object"){if(e["#visited"])return e;e["#visited"]=!0;for(const n of Object.keys(e)){const i=e[n];e[n]=await X(i,t+1)}return e}else return e}function Xe(e){return new Promise(n=>{setTimeout(()=>{n()},e)})}w.delay=Xe;function Fe(e){return e.filter(t=>typeof t<"u")}w.filterUndefined=Fe;async function Ve(e,t){await n("#root",e,t),q(e);async function n(i,r,s){if(Array.isArray(r))await s(i,r),await Promise.all(r.map((u,o)=>n(`${i}[${o}]`,u,s)));else if(typeof r=="object"){if(r["#visited"])return;await s(i,r),r["#visited"]=!0,await Promise.all(Object.keys(r).map(async u=>{const o=r[u];await n(u,o,s)}))}else await s(i,r)}}w.visitor=Ve;Object.defineProperty(H,"__esModule",{value:!0});const F=w;class Be{constructor(t){C(this,"r",{});C(this,"setter",{});C(this,"resolved",{});C(this,"keyTranslator");this.keyTranslator=t}getAll(){return(0,F.filterUndefined)(Object.values(this.r))}getAllMissing(){return(0,F.filterUndefined)(Object.keys(this.r).filter(t=>!Object.keys(this.resolved).includes(t)))}getType(t){const n=this.getKey(t),i=this.r[n];if(i)return i;{let r;const s=(0,F.makePromise)(u=>{r=u},`get-depot ${n}`).catch(u=>{throw console.error(`Faild Promise ${u}`),Error(`Faild Promise ${u}`)});if(!r)throw Error("This should not happen f must always be set");return this.setter[n]=r,this.r[n]=s,s}}setType(t,n){const i=this.getKey(t);if(this.resolved[i])throw console.error(`Key ${i} already set...`),Error(`Key ${i} already set...`);this.resolved[i]=!0;let r=this.setter[i];if(!r){const s=(0,F.makePromise)(u=>{r=u},`set-depot ${i}`).catch(u=>{throw console.error(`Faild Promise ${u}`),Error(`Faild Promise ${u}`)});this.setter[i]=r,this.r[i]=s}r(n)}getKey(t){return this.keyTranslator(t)}}H.default=Be;var v={},j={},D={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",i="["+t+"]["+n+"]*",r=new RegExp("^"+i+"$"),s=function(o,a){const c=[];let l=a.exec(o);for(;l;){const f=[];f.startIndex=a.lastIndex-l[0].length;const p=l.length;for(let d=0;d<p;d++)f.push(l[d]);c.push(f),l=a.exec(o)}return c},u=function(o){const a=r.exec(o);return!(a===null||typeof a>"u")};e.isExist=function(o){return typeof o<"u"},e.isEmptyObject=function(o){return Object.keys(o).length===0},e.merge=function(o,a,c){if(a){const l=Object.keys(a),f=l.length;for(let p=0;p<f;p++)c==="strict"?o[l[p]]=[a[l[p]]]:o[l[p]]=a[l[p]]}},e.getValue=function(o){return e.isExist(o)?o:""},e.isName=u,e.getAllMatches=s,e.nameRegexp=i})(D);const ee=D,qe={allowBooleanAttributes:!1,unpairedTags:[]};j.validate=function(e,t){t=Object.assign({},qe,t);const n=[];let i=!1,r=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=oe(e,s),s.err)return s}else if(e[s]==="<"){let u=s;if(s++,e[s]==="!"){s=ae(e,s);continue}else{let o=!1;e[s]==="/"&&(o=!0,s++);let a="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)a+=e[s];if(a=a.trim(),a[a.length-1]==="/"&&(a=a.substring(0,a.length-1),s--),!Ke(a)){let f;return a.trim().length===0?f="Invalid space after '<'.":f="Tag '"+a+"' is an invalid name.",m("InvalidTag",f,T(e,s))}const c=Re(e,s);if(c===!1)return m("InvalidAttr","Attributes for '"+a+"' have open quote.",T(e,s));let l=c.value;if(s=c.index,l[l.length-1]==="/"){const f=s-l.length;l=l.substring(0,l.length-1);const p=ue(l,t);if(p===!0)i=!0;else return m(p.err.code,p.err.msg,T(e,f+p.err.line))}else if(o)if(c.tagClosed){if(l.trim().length>0)return m("InvalidTag","Closing tag '"+a+"' can't have attributes or invalid starting.",T(e,u));{const f=n.pop();if(a!==f.tagName){let p=T(e,f.tagStartPos);return m("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+a+"'.",T(e,u))}n.length==0&&(r=!0)}}else return m("InvalidTag","Closing tag '"+a+"' doesn't have proper closing.",T(e,s));else{const f=ue(l,t);if(f!==!0)return m(f.err.code,f.err.msg,T(e,s-l.length+f.err.line));if(r===!0)return m("InvalidXml","Multiple possible root nodes found.",T(e,s));t.unpairedTags.indexOf(a)!==-1||n.push({tagName:a,tagStartPos:u}),i=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=ae(e,s);continue}else if(e[s+1]==="?"){if(s=oe(e,++s),s.err)return s}else break;else if(e[s]==="&"){const f=Je(e,s);if(f==-1)return m("InvalidChar","char '&' is not expected.",T(e,s));s=f}else if(r===!0&&!ie(e[s]))return m("InvalidXml","Extra text at the end",T(e,s));e[s]==="<"&&s--}}else{if(ie(e[s]))continue;return m("InvalidChar","char '"+e[s]+"' is not expected.",T(e,s))}if(i){if(n.length==1)return m("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",T(e,n[0].tagStartPos));if(n.length>0)return m("InvalidXml","Invalid '"+JSON.stringify(n.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return m("InvalidXml","Start tag expected.",1);return!0};function ie(e){return e===" "||e==="	"||e===`
`||e==="\r"}function oe(e,t){const n=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const i=e.substr(n,t-n);if(t>5&&i==="xml")return m("InvalidXml","XML declaration allowed only at the start of the document.",T(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function ae(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let n=1;for(t+=8;t<e.length;t++)if(e[t]==="<")n++;else if(e[t]===">"&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const xe='"',Ue="'";function Re(e,t){let n="",i="",r=!1;for(;t<e.length;t++){if(e[t]===xe||e[t]===Ue)i===""?i=e[t]:i!==e[t]||(i="");else if(e[t]===">"&&i===""){r=!0;break}n+=e[t]}return i!==""?!1:{value:n,index:t,tagClosed:r}}const We=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function ue(e,t){const n=ee.getAllMatches(e,We),i={};for(let r=0;r<n.length;r++){if(n[r][1].length===0)return m("InvalidAttr","Attribute '"+n[r][2]+"' has no space in starting.",k(n[r]));if(n[r][3]!==void 0&&n[r][4]===void 0)return m("InvalidAttr","Attribute '"+n[r][2]+"' is without value.",k(n[r]));if(n[r][3]===void 0&&!t.allowBooleanAttributes)return m("InvalidAttr","boolean attribute '"+n[r][2]+"' is not allowed.",k(n[r]));const s=n[r][2];if(!Ye(s))return m("InvalidAttr","Attribute '"+s+"' is an invalid name.",k(n[r]));if(!i.hasOwnProperty(s))i[s]=1;else return m("InvalidAttr","Attribute '"+s+"' is repeated.",k(n[r]))}return!0}function Ge(e,t){let n=/\d/;for(e[t]==="x"&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(n))break}return-1}function Je(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Ge(e,t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===";")break;return-1}return t}function m(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function Ye(e){return ee.isName(e)}function Ke(e){return ee.isName(e)}function T(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function k(e){return e.startIndex+e[1].length}var te={};const he={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},Ze=function(e){return Object.assign({},he,e)};te.buildOptions=Ze;te.defaultOptions=he;class ze{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,n){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:n})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child})}}var Qe=ze;function He(e,t){const n={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let i=1,r=!1,s=!1,u="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(r&&et(e,t))t+=7,[entityName,val,t]=je(e,t+1),val.indexOf("&")===-1&&(n[entityName]={regx:RegExp(`&${entityName};`,"g"),val});else if(r&&tt(e,t))t+=8;else if(r&&nt(e,t))t+=8;else if(r&&rt(e,t))t+=9;else if(De)s=!0;else throw new Error("Invalid DOCTYPE");i++,u=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,i--):i--,i===0)break}else e[t]==="["?r=!0:u+=e[t];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:t}}function je(e,t){let n="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)n+=e[t];if(n=n.trim(),n.indexOf(" ")!==-1)throw new Error("External entites are not supported");const i=e[t++];let r="";for(;t<e.length&&e[t]!==i;t++)r+=e[t];return[n,r,t]}function De(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function et(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function tt(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function nt(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function rt(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}var st=He;const it=/^[-+]?0x[a-fA-F0-9]+$/,ot=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const at={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function ut(e,t={}){if(t=Object.assign({},at,t),!e||typeof e!="string")return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(t.hex&&it.test(n))return Number.parseInt(n,16);{const i=ot.exec(n);if(i){const r=i[1],s=i[2];let u=ct(i[3]);const o=i[4]||i[6];if(!t.leadingZeros&&s.length>0&&r&&n[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!r&&n[1]!==".")return e;{const a=Number(n),c=""+a;return c.search(/[eE]/)!==-1||o?t.eNotation?a:e:n.indexOf(".")!==-1?c==="0"&&u===""||c===u||r&&c==="-"+u?a:e:s?u===c||r+u===c?a:e:n===c||n===r+c?a:e}}else return e}}function ct(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}var lt=ut;const ne=D,L=Qe,ft=st,pt=lt;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,ne.nameRegexp);let dt=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=ht,this.parseXml=bt,this.parseTextData=gt,this.resolveNameSpace=mt,this.buildAttributesMap=wt,this.isItStopNode=Et,this.replaceEntitiesValue=Tt,this.readStopNodeData=vt,this.saveTextToParentTag=Nt}};function ht(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const i=t[n];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:e[i]}}}function gt(e,t,n,i,r,s,u){if(e!==void 0&&(this.options.trimValues&&!i&&(e=e.trim()),e.length>0)){u||(e=this.replaceEntitiesValue(e));const o=this.options.tagValueProcessor(t,e,n,r,s);return o==null?e:typeof o!=typeof e||o!==e?o:this.options.trimValues?Z(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Z(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function mt(e){if(this.options.removeNSPrefix){const t=e.split(":"),n=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=n+t[1])}return e}const yt=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function wt(e,t){if(!this.options.ignoreAttributes&&typeof e=="string"){const n=ne.getAllMatches(e,yt),i=n.length,r={};for(let s=0;s<i;s++){const u=this.resolveNameSpace(n[s][1]);let o=n[s][4],a=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(a=this.options.transformAttributeName(a)),a==="__proto__"&&(a="#__proto__"),o!==void 0){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const c=this.options.attributeValueProcessor(u,o,t);c==null?r[a]=o:typeof c!=typeof o||c!==o?r[a]=c:r[a]=Z(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[a]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){const s={};return s[this.options.attributesGroupName]=r,s}return r}}const bt=function(e){e=e.replace(/\r\n?/g,`
`);const t=new L("!xml");let n=t,i="",r="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){const o=I(e,">",s,"Closing Tag is not closed.");let a=e.substring(s+2,o).trim();if(this.options.removeNSPrefix){const c=a.indexOf(":");c!==-1&&(a=a.substr(c+1))}this.options.transformTagName&&(a=this.options.transformTagName(a)),n&&(i=this.saveTextToParentTag(i,n,r)),r=r.substr(0,r.lastIndexOf(".")),n=this.tagsNodeStack.pop(),i="",s=o}else if(e[s+1]==="?"){let o=K(e,s,!1,"?>");if(!o)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,n,r),!(this.options.ignoreDeclaration&&o.tagName==="?xml"||this.options.ignorePiTags)){const a=new L(o.tagName);a.add(this.options.textNodeName,""),o.tagName!==o.tagExp&&o.attrExpPresent&&(a[":@"]=this.buildAttributesMap(o.tagExp,r)),n.addChild(a)}s=o.closeIndex+1}else if(e.substr(s+1,3)==="!--"){const o=I(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const a=e.substring(s+4,o-2);i=this.saveTextToParentTag(i,n,r),n.add(this.options.commentPropName,[{[this.options.textNodeName]:a}])}s=o}else if(e.substr(s+1,2)==="!D"){const o=ft(e,s);this.docTypeEntities=o.entities,s=o.i}else if(e.substr(s+1,2)==="!["){const o=I(e,"]]>",s,"CDATA is not closed.")-2,a=e.substring(s+9,o);if(i=this.saveTextToParentTag(i,n,r),this.options.cdataPropName)n.add(this.options.cdataPropName,[{[this.options.textNodeName]:a}]);else{let c=this.parseTextData(a,n.tagname,r,!0,!1,!0);c==null&&(c=""),n.add(this.options.textNodeName,c)}s=o+2}else{let o=K(e,s,this.options.removeNSPrefix),a=o.tagName,c=o.tagExp,l=o.attrExpPresent,f=o.closeIndex;this.options.transformTagName&&(a=this.options.transformTagName(a)),n&&i&&n.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,n,r,!1)),a!==t.tagname&&(r+=r?"."+a:a);const p=n;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(n=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,r,a)){let d="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)s=o.closeIndex;else if(this.options.unpairedTags.indexOf(a)!==-1)s=o.closeIndex;else{const b=this.readStopNodeData(e,a,f+1);if(!b)throw new Error(`Unexpected end of ${a}`);s=b.i,d=b.tagContent}const g=new L(a);a!==c&&l&&(g[":@"]=this.buildAttributesMap(c,r)),d&&(d=this.parseTextData(d,a,r,!0,l,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),g.add(this.options.textNodeName,d),n.addChild(g)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){a[a.length-1]==="/"?(a=a.substr(0,a.length-1),c=a):c=c.substr(0,c.length-1),this.options.transformTagName&&(a=this.options.transformTagName(a));const d=new L(a);a!==c&&l&&(d[":@"]=this.buildAttributesMap(c,r)),r=r.substr(0,r.lastIndexOf(".")),n.addChild(d)}else{const d=new L(a);this.tagsNodeStack.push(n),a!==c&&l&&(d[":@"]=this.buildAttributesMap(c,r)),n.addChild(d),n=d}i="",s=f}}else i+=e[s];return t.child},Tt=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function Nt(e,t,n,i){return e&&(i===void 0&&(i=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,n,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,i),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function Et(e,t,n){const i="*."+n;for(const r in e){const s=e[r];if(i===s||t===s)return!0}return!1}function Ot(e,t,n=">"){let i,r="";for(let s=t;s<e.length;s++){let u=e[s];if(i)u===i&&(i="");else if(u==='"'||u==="'")i=u;else if(u===n[0])if(n[1]){if(e[s+1]===n[1])return{data:r,index:s}}else return{data:r,index:s};else u==="	"&&(u=" ");r+=u}}function I(e,t,n,i){const r=e.indexOf(t,n);if(r===-1)throw new Error(i);return r+t.length-1}function K(e,t,n,i=">"){const r=Ot(e,t+1,i);if(!r)return;let s=r.data;const u=r.index,o=s.search(/\s/);let a=s,c=!0;if(o!==-1&&(a=s.substr(0,o).replace(/\s\s*$/,""),s=s.substr(o+1)),n){const l=a.indexOf(":");l!==-1&&(a=a.substr(l+1),c=a!==r.data.substr(l+1))}return{tagName:a,tagExp:s,closeIndex:u,attrExpPresent:c}}function vt(e,t,n){const i=n;let r=1;for(;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="/"){const s=I(e,">",n,`${t} is not closed`);if(e.substring(n+2,s).trim()===t&&(r--,r===0))return{tagContent:e.substring(i,n),i:s};n=s}else if(e[n+1]==="?")n=I(e,"?>",n+1,"StopNode is not closed.");else if(e.substr(n+1,3)==="!--")n=I(e,"-->",n+3,"StopNode is not closed.");else if(e.substr(n+1,2)==="![")n=I(e,"]]>",n,"StopNode is not closed.")-2;else{const s=K(e,n,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&r++,n=s.closeIndex)}}function Z(e,t,n){if(t&&typeof e=="string"){const i=e.trim();return i==="true"?!0:i==="false"?!1:pt(e,n)}else return ne.isExist(e)?e:""}var St=dt,ge={};function $t(e,t){return me(e,t)}function me(e,t,n){let i;const r={};for(let s=0;s<e.length;s++){const u=e[s],o=Pt(u);let a="";if(n===void 0?a=o:a=n+"."+o,o===t.textNodeName)i===void 0?i=u[o]:i+=""+u[o];else{if(o===void 0)continue;if(u[o]){let c=me(u[o],t,a);const l=It(c,t);u[":@"]?At(c,u[":@"],a,t):Object.keys(c).length===1&&c[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?c=c[t.textNodeName]:Object.keys(c).length===0&&(t.alwaysCreateTextNode?c[t.textNodeName]="":c=""),r[o]!==void 0&&r.hasOwnProperty(o)?(Array.isArray(r[o])||(r[o]=[r[o]]),r[o].push(c)):t.isArray(o,a,l)?r[o]=[c]:r[o]=c}}}return typeof i=="string"?i.length>0&&(r[t.textNodeName]=i):i!==void 0&&(r[t.textNodeName]=i),r}function Pt(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const i=t[n];if(i!==":@")return i}}function At(e,t,n,i){if(t){const r=Object.keys(t),s=r.length;for(let u=0;u<s;u++){const o=r[u];i.isArray(o,n+"."+o,!0,!0)?e[o]=[t[o]]:e[o]=t[o]}}}function It(e,t){const n=Object.keys(e).length;return!!(n===0||n===1&&e[t.textNodeName])}ge.prettify=$t;const{buildOptions:_t}=te,Ct=St,{prettify:Mt}=ge,kt=j;let Lt=class{constructor(t){this.externalEntities={},this.options=_t(t)}parse(t,n){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const s=kt.validate(t,n);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const i=new Ct(this.options);i.addExternalEntities(this.externalEntities);const r=i.parseXml(t);return this.options.preserveOrder||r===void 0?r:Mt(r,this.options)}addEntity(t,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=n}};var Xt=Lt;const Ft=`
`;function Vt(e,t){let n="";return t.format&&t.indentBy.length>0&&(n=Ft),ye(e,t,"",n)}function ye(e,t,n,i){let r="",s=!1;for(let u=0;u<e.length;u++){const o=e[u],a=Bt(o);let c="";if(n.length===0?c=a:c=`${n}.${a}`,a===t.textNodeName){let g=o[a];qt(c,t)||(g=t.tagValueProcessor(a,g),g=we(g,t)),s&&(r+=i),r+=g,s=!1;continue}else if(a===t.cdataPropName){s&&(r+=i),r+=`<![CDATA[${o[a][0][t.textNodeName]}]]>`,s=!1;continue}else if(a===t.commentPropName){r+=i+`<!--${o[a][0][t.textNodeName]}-->`,s=!0;continue}else if(a[0]==="?"){const g=ce(o[":@"],t),b=a==="?xml"?"":i;let O=o[a][0][t.textNodeName];O=O.length!==0?" "+O:"",r+=b+`<${a}${O}${g}?>`,s=!0;continue}let l=i;l!==""&&(l+=t.indentBy);const f=ce(o[":@"],t),p=i+`<${a}${f}`,d=ye(o[a],t,c,l);t.unpairedTags.indexOf(a)!==-1?t.suppressUnpairedNode?r+=p+">":r+=p+"/>":(!d||d.length===0)&&t.suppressEmptyNode?r+=p+"/>":d&&d.endsWith(">")?r+=p+`>${d}${i}</${a}>`:(r+=p+">",d&&i!==""&&(d.includes("/>")||d.includes("</"))?r+=i+t.indentBy+d+i:r+=d,r+=`</${a}>`),s=!0}return r}function Bt(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const i=t[n];if(i!==":@")return i}}function ce(e,t){let n="";if(e&&!t.ignoreAttributes)for(let i in e){let r=t.attributeValueProcessor(i,e[i]);r=we(r,t),r===!0&&t.suppressBooleanAttributes?n+=` ${i.substr(t.attributeNamePrefix.length)}`:n+=` ${i.substr(t.attributeNamePrefix.length)}="${r}"`}return n}function qt(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let n=e.substr(e.lastIndexOf(".")+1);for(let i in t.stopNodes)if(t.stopNodes[i]===e||t.stopNodes[i]==="*."+n)return!0;return!1}function we(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){const i=t.entities[n];e=e.replace(i.regex,i.val)}return e}var xt=Vt;const Ut=xt,Rt={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function A(e){this.options=Object.assign({},Rt,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Jt),this.processTextOrObjNode=Wt,this.options.format?(this.indentate=Gt,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}A.prototype.build=function(e){return this.options.preserveOrder?Ut(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};A.prototype.j2x=function(e,t){let n="",i="";for(let r in e)if(!(typeof e[r]>"u"))if(e[r]===null)r[0]==="?"?i+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:i+=this.indentate(t)+"<"+r+"/"+this.tagEndChar;else if(e[r]instanceof Date)i+=this.buildTextValNode(e[r],r,"",t);else if(typeof e[r]!="object"){const s=this.isAttribute(r);if(s)n+=this.buildAttrPairStr(s,""+e[r]);else if(r===this.options.textNodeName){let u=this.options.tagValueProcessor(r,""+e[r]);i+=this.replaceEntitiesValue(u)}else i+=this.buildTextValNode(e[r],r,"",t)}else if(Array.isArray(e[r])){const s=e[r].length;for(let u=0;u<s;u++){const o=e[r][u];typeof o>"u"||(o===null?r[0]==="?"?i+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:i+=this.indentate(t)+"<"+r+"/"+this.tagEndChar:typeof o=="object"?i+=this.processTextOrObjNode(o,r,t):i+=this.buildTextValNode(o,r,"",t))}}else if(this.options.attributesGroupName&&r===this.options.attributesGroupName){const s=Object.keys(e[r]),u=s.length;for(let o=0;o<u;o++)n+=this.buildAttrPairStr(s[o],""+e[r][s[o]])}else i+=this.processTextOrObjNode(e[r],r,t);return{attrStr:n,val:i}};A.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function Wt(e,t,n){const i=this.j2x(e,n+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,i.attrStr,n):this.buildObjectNode(i.val,t,i.attrStr,n)}A.prototype.buildObjectNode=function(e,t,n,i){if(e==="")return t[0]==="?"?this.indentate(i)+"<"+t+n+"?"+this.tagEndChar:this.indentate(i)+"<"+t+n+this.closeTag(t)+this.tagEndChar;{let r="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",r=""),n&&e.indexOf("<")===-1?this.indentate(i)+"<"+t+n+s+">"+e+r:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(i)+`<!--${e}-->`+this.newLine:this.indentate(i)+"<"+t+n+s+this.tagEndChar+e+this.indentate(i)+r}};A.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};A.prototype.buildTextValNode=function(e,t,n,i){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(i)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(i)+"<"+t+n+"?"+this.tagEndChar;{let r=this.options.tagValueProcessor(t,e);return r=this.replaceEntitiesValue(r),r===""?this.indentate(i)+"<"+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(i)+"<"+t+n+">"+r+"</"+t+this.tagEndChar}};A.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};function Gt(e){return this.options.indentBy.repeat(e)}function Jt(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}var Yt=A;const Kt=j,Zt=Xt,zt=Yt;var Qt={XMLParser:Zt,XMLValidator:Kt,XMLBuilder:zt};Object.defineProperty(v,"__esModule",{value:!0});v.getTagname=v.writeXml=v.parseXml=void 0;const Ht=Qt,jt=["byte","decimal","int","integer","long","negativeInteger","nonNegativeInteger","nonPositiveInteger","positiveInteger","short","unsignedLong","unsignedInt","unsignedShort","unsignedByte","ENTITIES","ENTITY","ID","IDREF","IDREFS","language","Name","NCName","NMTOKEN","NMTOKENS","normalizedString","QName","string","token","date","dateTime","duration","gDay","gMonth","gMonthDay","gYear","gYearMonth","time","anyURI","base64Binary","boolean","double","float","hexBinary","NOTATION","QName"];async function Dt(e,t){var s,u;const n=new Ht.XMLParser({allowBooleanAttributes:!0,ignoreAttributes:!1,attributeNamePrefix:"",ignoreDeclaration:!0,removeNSPrefix:!1,preserveOrder:!0});if(typeof t=="function"){const o=/<!ENTITY\s+(?<key>[^\s]+)\s+SYSTEM\s+"(?<path>[^"]*)">/gm;for(const a of e.matchAll(o)){const c=(s=a.groups)==null?void 0:s.key,l=(u=a.groups)==null?void 0:u.path;c&&l&&n.addEntity(c,await t(l))}}const i=n.parse(e);return Te(i[0])}v.parseXml=Dt;const en={pretty:!0,indent:2,quote:"'"};function tn(e,t){t??(t={});const n={...en,...t},i=be(e,{},n,0);return t.pretty?nn(i):i}v.writeXml=tn;function be(e,t,n,i){const r=Object.fromEntries(Object.entries(e.scope).filter(([f,p])=>t[f]==null||t[f]!=p)),s={...t,...r},u=e.name.namespace==s[""]?e.name.local:`${Object.entries(t).filter(([f,p])=>e.name.namespace==p)[0][0]}:${e.name.local}`,o=Object.entries(r).map(([f,p])=>f==""?`xmlns=${n.quote}${p}${n.quote}`:`xmlns:${f}=${n.quote}${p}${n.quote}`),a=Object.entries(e.attributes).map(([f,p])=>`${f}=${n.quote}${p}${n.quote}`),c=`${n.pretty?`
`:""}${Array.from({length:n.pretty?i:0},()=>" ").join("")}`,l=e.text!==void 0?e.text:e.children.map(f=>Array.from({length:n.pretty?n.indent:0},()=>" ").join("")+be(f,s,n,i+n.indent)).join(c);return l?e.text!==void 0?`<${[u,...o,...a].join(" ")}>${l}</${u}>`:`<${[u,...o,...a].join(" ")}>${c}${l}${c}</${u}>`:`<${u} ${o} ${a} />`}function nn(e){var t=new DOMParser().parseFromString(e,"application/xml"),n=new DOMParser().parseFromString(['<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform">','  <xsl:strip-space elements="*"/>','  <xsl:template match="para[content-style][not(text())]">','    <xsl:value-of select="normalize-space(.)"/>',"  </xsl:template>",'  <xsl:template match="node()|@*">','    <xsl:copy><xsl:apply-templates select="node()|@*"/></xsl:copy>',"  </xsl:template>",'  <xsl:output indent="yes"/>',"</xsl:stylesheet>"].join(`
`),"application/xml"),i=new XSLTProcessor;i.importStylesheet(n);var r=i.transformToDocument(t),s=new XMLSerializer().serializeToString(r);return s}function Te(e,t){t||(t={});const n=Object.keys(e).filter(o=>o!==":@"&&o!=="#text");if(n.length==0)return console.log(`no key ${JSON.stringify(e,void 0,2)}`),{};const i=n[0],r={...t};e.children=e[i]??[],delete e[i],e.children.length===1&&typeof e.children[0]["#text"]<"u"&&(e.text=e.children[0]["#text"],e.children=[]),typeof e["#text"]<"u"&&(e.text=["#text"],delete e["#text"]),e.text==null?e.text="":typeof e.text!="string"&&(e.text=e.text.toString());const u=e[":@"];if(u){u.xmlns&&(r[""]=u.xmlns),typeof r[""]>"u"&&(r[""]="");const o=Object.keys(u).filter(c=>c.startsWith("xmlns:")).map(c=>{const l=u[c];return{prefix:c.substring(6),ns:l}});for(const{prefix:c,ns:l}of o)r[c]=l;const a=Object.entries(u).filter(c=>c[0]!=="xmlns"&&!c[0].startsWith("xmlns:")).map(c=>({name:c[0],value:c[1]}));e.attributes=Object.fromEntries(a.map(c=>[c.name,c.value])),delete e[":@"]}else e.attributes={};e.name=Ne(i,r,!1),e.scope=r;for(const o of e.children)Te(o,r);return e}function Ne(e,t,n=!0){if(e.indexOf(":")!=-1){const i=e.indexOf(":"),r=e.substring(0,i),s=e.substring(i+1);if(!t[r])throw Error(`Prefix ${r} unknown on element {tagName}`);const u=t[r];return{local:s,namespace:u}}else return n&&Object.keys(jt).includes(e)?{local:e,namespace:""}:{local:e,namespace:(t?t[""]:void 0)??""}}v.getTagname=Ne;var R={},x={},rn={get exports(){return x},set exports(e){x=e}};(function(e,t){var n=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof P<"u")return P;throw new Error("unable to locate global object")},i=n();e.exports=t=i.fetch,i.fetch&&(t.default=i.fetch.bind(i)),t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response})(rn,x);var sn=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(R,"__esModule",{value:!0});R.downloadXsd=void 0;const on=v,an=sn(x),un=w;async function cn(e,t){const n={};return await z(e,n,t),(0,un.filterUndefined)(await Promise.all(Object.values(n)))}R.downloadXsd=cn;async function z(e,t,n){console.info(`Download ${e}`);const i=await(0,an.default)(e),r=await(0,on.parseXml)(await i.text(),n);if(r.name.local!=="schema"||r.name.namespace!=="http://www.w3.org/2001/XMLSchema")throw console.error(r),Error("No Schema");t[r.attributes.targetNamespace]||(t[r.attributes.targetNamespace]=Promise.resolve(r));for(const s of r.children.filter(u=>u.name.local=="import"&&u.name.namespace=="http://www.w3.org/2001/XMLSchema")){if(t[s.attributes.namespace])continue;const u=s.attributes.namespace;if(s.attributes.schemaLocation){const o=e.lastIndexOf("/"),a=e.substring(0,o+1)+s.attributes.schemaLocation;t[u]=z(a,t,n)}else t[u]=z(u,t,n)}return r}var ln=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Q,"__esModule",{value:!0});const M=ln(H),S=v,h=w,fn=R,le=new M.default(e=>e.local+"#"+e.namespace),fe=new M.default(e=>e.local+"#"+e.namespace),N=new M.default(e=>e.local+"#"+e.namespace),pe=new M.default(e=>e.local+"#"+e.namespace),E=new M.default(e=>e.local+"#"+e.namespace),B=new M.default(e=>e.local+"#"+e.namespace),pn={byte:"number",decimal:"number",int:"number",integer:"number",long:"number",negativeInteger:"number",nonNegativeInteger:"number",nonPositiveInteger:"number",positiveInteger:"number",short:"number",unsignedLong:"number",unsignedInt:"number",unsignedShort:"number",unsignedByte:"number",ENTITIES:"string",ENTITY:"string",ID:"string",IDREF:"string",IDREFS:"string",language:"string",Name:"string",NCName:"string",NMTOKEN:"string",NMTOKENS:"string",normalizedString:"string",QName:"string",string:"string",token:"string",date:"date",dateTime:"date",duration:"date",gDay:"date",gMonth:"date",gMonthDay:"date",gYear:"date",gYearMonth:"date",time:"date",anyURI:"string",base64Binary:"byte[]",boolean:"boolean",double:"number",float:"number",hexBinary:"byte[]",NOTATION:"string"};function dn(e,t){N.setType({local:e,namespace:"http://www.w3.org/2001/XMLSchema"},{base:t,original:e,subType:"native",type:"simpleType"}),E.setType({local:e,namespace:"http://www.w3.org/2001/XMLSchema"},{base:t,original:e,subType:"native",type:"simpleType"})}Object.entries(pn).map(e=>dn(...e));async function Ee(e,t){if(typeof e=="string")return Ee(await(0,fn.downloadXsd)(e,t),t);const n=[];for(const s of e){const u=s.attributes.targetNamespace;for(const o of s.children){const a=re(o,u,!0)??se(o,u,!0)??ve(o,u)??Oe(o,u,!0)??W(o,u);a!=null&&n.push(a)}}await(0,h.waitAll)(B.getAll());const r=(await(0,h.waitAll)(n)).flatMap(s=>Array.isArray(s)?s:[s]);return r.forEach(s=>{s.name&&(s.name.root=!0)}),r.filter(s=>s.type=="element")}Q.default=Ee;function Oe(e,t,n){if(e.name.local==="element"&&e.name.namespace==="http://www.w3.org/2001/XMLSchema"){if(e.attributes.ref)return(0,h.makePromise)(async a=>{const c=await B.getType((0,S.getTagname)(e.attributes.ref,e.scope)),l=hn(e,c);a(l)},"Wrapping "+e.attributes.ref);const i=e.attributes.name;if(e.attributes.type){const a=E.getType((0,S.getTagname)(e.attributes.type,e.scope)),c=(0,h.makePromise)(async l=>{const f={name:{local:i,namespace:t},content:await a,type:"element",occurence:U(e)};l(f)},`getElement-${i}- ${e.attributes.type}`).catch(l=>{throw console.error(`Faild Promise ${l}`),Error(`Faild Promise ${l}`)});return n&&B.setType({local:e.attributes.name,namespace:t},c),c}const s=e.children.filter(a=>a.name.local!=="annotation"||a.name.namespace!=="http://www.w3.org/2001/XMLSchema")[0];let u;if(s){const a=ve(s,t),c=W(s,t);u=a??c}else u=void 0;const o={type:"element",name:{local:i,namespace:t},occurence:U(e),content:u};return n&&B.setType({local:e.attributes.name,namespace:t},o),o}else return}function ve(e,t){if(e.name.local==="complexType"&&e.name.namespace==="http://www.w3.org/2001/XMLSchema"){let r=function(l){if(l.name.local==="element"&&l.name.namespace==="http://www.w3.org/2001/XMLSchema"){const f=Oe(l,t,!1);if(f)return f;throw Error("faild to get element..")}else return s(l)},s=function(l){if(!(typeof l>"u"))return l.name.local==="choice"&&l.name.namespace==="http://www.w3.org/2001/XMLSchema"?{type:"choise",content:(0,h.filterUndefined)(l.children.map(d=>r(d))),occurence:U(l)}:l.name.local==="sequence"&&l.name.namespace==="http://www.w3.org/2001/XMLSchema"?{type:"sequence",content:(0,h.filterUndefined)(l.children.map(d=>r(d))),occurence:{maxOccurance:l.attributes.maxOccurs==="unbounded"?"unbounded":typeof l.attributes.maxOccurs>"u"?1:parseInt(l.attributes.maxOccurs),minOccurance:typeof l.attributes.minOccurs>"u"?1:parseInt(l.attributes.minOccurs)}}:l.name.local==="all"&&l.name.namespace==="http://www.w3.org/2001/XMLSchema"?{type:"all",content:(0,h.filterUndefined)(l.children.map(d=>r(d))),occurence:{maxOccurance:l.attributes.maxOccurs==="unbounded"?"unbounded":typeof l.attributes.maxOccurs>"u"?1:parseInt(l.attributes.maxOccurs),minOccurance:typeof l.attributes.minOccurs>"u"?1:parseInt(l.attributes.minOccurs)}}:void 0},u=function(l){if(!(typeof l>"u"))if(l.name.local==="simpleContent"&&l.name.namespace==="http://www.w3.org/2001/XMLSchema"){const f=l.children.filter(p=>p.name.local!=="annotation"||p.name.namespace!=="http://www.w3.org/2001/XMLSchema");if(f.length!==1)throw Error("SimpleContent is only supported with ONE extension or ONE restriction");if(f[0].name.local==="extension"&&l.name.namespace==="http://www.w3.org/2001/XMLSchema")return(0,h.makePromise)(async d=>{const g=E.getType((0,S.getTagname)(f[0].attributes.base,l.scope)),b={base:await(0,h.waitAll)(g),type:"simpleContent",attributes:V(f[0].children,t)};d(b)},"getSimpleContent").catch(d=>{throw console.error(`Faild Promise ${d}`),Error(`Faild Promise ${d}`)});if(f[0].name.local==="restriction"&&l.name.namespace==="http://www.w3.org/2001/XMLSchema")throw Error("simpleContent restriction not yet supported")}else return},o=function(l){if(!(typeof l>"u"))if(l.name.local==="complexContent"&&l.name.namespace==="http://www.w3.org/2001/XMLSchema"){const f=l.children.filter(p=>p.name.local!=="annotation"||p.name.namespace!=="http://www.w3.org/2001/XMLSchema");if(f.length!==1)throw Error("ComplexContent is only supported with ONE extension or ONE restriction");if(f[0].name.local==="extension"&&l.name.namespace==="http://www.w3.org/2001/XMLSchema")return(0,h.makePromise)(async d=>{const g=E.getType((0,S.getTagname)(f[0].attributes.base,l.scope)),b=f[0].children.filter(_=>_.name.local!=="annotation"&&_.name.local!=="attribute"&&_.name.local!=="attributeGroup"||_.name.namespace!=="http://www.w3.org/2001/XMLSchema")[0],O={base:await(0,h.waitAll)(g),type:"complexContent",content:await(0,h.waitAll)(s(b)),attributes:V(f[0].children,t)};d(O)},"getComplexContent").catch(d=>{throw console.error(`Faild Promise ${d}`),Error(`Faild Promise ${d}`)});if(f[0].name.local==="restriction"&&l.name.namespace==="http://www.w3.org/2001/XMLSchema")throw Error("ComplexContent restriction not yet supported")}else return};const n=e.children.filter(l=>l.name.local!=="annotation"&&l.name.local!=="attribute"&&l.name.local!=="attributeGroup"||l.name.namespace!=="http://www.w3.org/2001/XMLSchema")[0];let i=e.children.filter(l=>(l.name.local==="attribute"||l.name.local==="attributeGroup")&&l.name.namespace=="http://www.w3.org/2001/XMLSchema");const a=u(n),c=o(n);if(a??c){const l={type:"complexType",content:a??c,attributes:V(e.children,t)};return e.attributes.name&&(l.name={local:e.attributes.name,namespace:t},pe.setType({local:e.attributes.name,namespace:t},l),E.setType({local:e.attributes.name,namespace:t},l)),l}else{const l={type:"complexType",content:s(n),attributes:V(i,t)};return e.attributes.name&&(l.name={local:e.attributes.name,namespace:t},pe.setType({local:e.attributes.name,namespace:t},l),E.setType({local:e.attributes.name,namespace:t},l)),l}}else return}function hn(e,t){if(typeof e.attributes.maxOccurs>"u"&&typeof e.attributes.minOccurs>"u")return t;const n=U(e);return{type:"element",content:t.content,occurence:n,name:{local:t.name.local,namespace:t.name.namespace}}}function U(e){return{maxOccurance:e.attributes.maxOccurs==="unbounded"?"unbounded":typeof e.attributes.maxOccurs>"u"?1:parseInt(e.attributes.maxOccurs),minOccurance:typeof e.attributes.minOccurs>"u"?1:parseInt(e.attributes.minOccurs)}}function W(e,t){var n,i,r,s;if(e.name.local==="simpleType"&&e.name.namespace==="http://www.w3.org/2001/XMLSchema"){const u=e.children.filter(o=>o.name.local!=="annotation"||o.name.namespace!=="http://www.w3.org/2001/XMLSchema")[0];if(u.name.local==="list"&&u.name.namespace==="http://www.w3.org/2001/XMLSchema")throw Error("simpleType List is not yet implemented");if(u.name.local==="restriction"&&u.name.namespace==="http://www.w3.org/2001/XMLSchema"){const o=u.children.filter(a=>a.name.local!=="annotation"||a.name.namespace!=="http://www.w3.org/2001/XMLSchema");if(o.length==0){const a=(0,h.makePromise)(async c=>{const l={subSubType:"simple",subType:"restriction",type:"simpleType",baseType:await(0,h.waitAll)(N.getType((0,S.getTagname)(u.attributes.base,e.scope)))};e.attributes.name&&(l.name={local:e.attributes.name,namespace:t}),c(l)},"getSimpleType-restriction-simple").catch(c=>{throw console.error(`Faild Promise ${c}`),Error(`Faild Promise ${c}`)});return e.attributes.name&&(N.setType({local:e.attributes.name,namespace:t},a),E.setType({local:e.attributes.name,namespace:t},a)),a}else if(o[0].name.local==="enumeration"&&o[0].name.namespace==="http://www.w3.org/2001/XMLSchema"){if(!o.every(c=>c.name.local==="enumeration"&&c.name.namespace==="http://www.w3.org/2001/XMLSchema"))throw Error(`Mixing enumeration with other restrictions is not supported... ${JSON.stringify(o,void 0," ")}`);const a=(0,h.makePromise)(async c=>{const l=o.map(p=>p.attributes.value),f={subSubType:"enumeration",subType:"restriction",type:"simpleType",baseType:await(0,h.waitAll)(N.getType((0,S.getTagname)(u.attributes.base,e.scope))),values:l};e.attributes.name&&(f.name={local:e.attributes.name,namespace:t}),c(f)},"getSimpleType-restriction-enumeration").catch(c=>{throw console.error(`Faild Promise ${c}`),Error(`Faild Promise ${c}`)});return e.attributes.name&&(N.setType({local:e.attributes.name,namespace:t},a),E.setType({local:e.attributes.name,namespace:t},a)),a}else if(o[0].name.local==="pattern"&&o[0].name.namespace==="http://www.w3.org/2001/XMLSchema"){if(o.length>1)throw Error("When Pettern is used in restriction only one pattern is allowed and nothing else");const a={subSubType:"pattern",subType:"restriction",type:"simpleType",pattern:new RegExp(o[0].attributes.value)};return e.attributes.name&&(a.name={local:e.attributes.name,namespace:t},N.setType({local:e.attributes.name,namespace:t},a),E.setType({local:e.attributes.name,namespace:t},a)),a}else if((o[0].name.local==="maxExclusive"||o[0].name.local==="maxInclusive"||o[0].name.local==="minExclusive"||o[0].name.local==="minInclusive")&&o[0].name.namespace==="http://www.w3.org/2001/XMLSchema"){const a=(n=o.filter(g=>g.name.local==="minExclusive"&&g.name.namespace==="http://www.w3.org/2001/XMLSchema")[0])==null?void 0:n.attributes.value,c=(i=o.filter(g=>g.name.local==="maxExclusive"&&g.name.namespace==="http://www.w3.org/2001/XMLSchema")[0])==null?void 0:i.attributes.value,l=(r=o.filter(g=>g.name.local==="minInclusive"&&g.name.namespace==="http://www.w3.org/2001/XMLSchema")[0])==null?void 0:r.attributes.value,f=(s=o.filter(g=>g.name.local==="maxInclusive"&&g.name.namespace==="http://www.w3.org/2001/XMLSchema")[0])==null?void 0:s.attributes.value;let p=0;if(a&&p++,c&&p++,l&&p++,f&&p++,o.length!=p)throw Error("min max is not allowed with other elements.");const d={subSubType:"Number",subType:"restriction",type:"simpleType",minExclusive:a?parseInt(a):void 0,maxExclusive:c?parseInt(c):void 0,minInclusive:l?parseInt(l):void 0,maxInclusive:f?parseInt(f):void 0};return e.attributes.name&&(d.name={local:e.attributes.name,namespace:t},N.setType({local:e.attributes.name,namespace:t},d),E.setType({local:e.attributes.name,namespace:t},d)),d}else throw Error("Unknown simple Restriction")}else if(u.name.local==="union"&&u.name.namespace==="http://www.w3.org/2001/XMLSchema"){const o=(0,h.makePromise)(async a=>{const c=(0,h.filterUndefined)(u.children.map(d=>W(d,t))),l=u.attributes.memberTypes,p={type:"simpleType",subType:"union",unions:typeof l>"u"?c:c.concat(await N.getType((0,S.getTagname)(l,e.scope)))};e.attributes.name&&(p.name={local:e.attributes.name,namespace:t}),a(p)},"simpletype");return e.attributes.name&&(N.setType({local:e.attributes.name,namespace:t},o),E.setType({local:e.attributes.name,namespace:t},o)),o}}else return}function re(e,t,n){if(e.name.local==="attribute"&&e.name.namespace==="http://www.w3.org/2001/XMLSchema"){e.scope||console.error(`scope is undefined ${JSON.stringify(e,void 0," ")}`);const i={local:e.attributes.name,namespace:t};if(e.attributes.ref)return le.getType((0,S.getTagname)(e.attributes.ref,e.scope));{const r=e.attributes.use??"optional";if(r==="prohibited")return;let s=(0,h.makePromise)(async o=>{if(e.attributes.type){const l=(0,S.getTagname)(e.attributes.type,e.scope),f=await(0,h.waitAll)(N.getType(l));o(f);return}const c=(await Promise.all(e.children.map(async l=>await W(l,t)))).filter(l=>l)[0];if(c){o(await(0,h.waitAll)(c));return}o(await(0,h.waitAll)(N.getType({local:"string",namespace:"http://www.w3.org/2001/XMLSchema"})))},"getAttribute").catch(o=>{throw console.error(`Faild Promise ${o}`),Error(`Faild Promise ${o}`)});const u={default:e.attributes.default,name:i,type:"attribute",optional:r==="optional",simpleType:s};return n&&le.setType(i,u),u}}else return}function V(e,t){return(0,h.makePromise)(async i=>{const r=await(0,h.waitAll)((0,h.filterUndefined)(e.map(u=>re(u,t,!1)))),s=(await(0,h.waitAll)((0,h.filterUndefined)(e.map(u=>se(u,t,!1))))).flatMap(u=>u);i(r.concat(s))},"getAttributes").catch(i=>{throw console.error(`Faild Promise ${i}`),Error(`Faild Promise ${i}`)})}function se(e,t,n){if(e.name.local==="attributeGroup"&&e.name.namespace==="http://www.w3.org/2001/XMLSchema"){if(e.attributes.ref)return fe.getType((0,S.getTagname)(e.attributes.ref,e.scope));{const i={local:e.attributes.name,namespace:t},r=(0,h.makePromise)(async s=>{const u=await(0,h.waitAll)((0,h.filterUndefined)(e.children.map(a=>re(a,t,!1)))),o=(await(0,h.waitAll)((0,h.filterUndefined)(e.children.map(a=>se(a,t,!1))))).flatMap(a=>a);s(u.concat(o))},"getAttributeGrupe").catch(s=>{throw console.error(`Faild Promise ${s}`),Error(`Faild Promise ${s}`)});return n&&fe.setType(i,r),r}}else return}var G={};Object.defineProperty(G,"__esModule",{value:!0});G.generateTypes=void 0;const gn=w;async function mn(e,t){let n=1;await(0,gn.visitor)(e,(r,s)=>{r=="name"&&s.local&&s.namespace&&(s.id=`ιδ${n++}ε`)});const i={};for(const r of e)y(r,!0,i,t??(s=>`${s.local}_ℕ${s.namespace.replaceAll(":","_α_").replaceAll("/","_ι_").replaceAll(".","_σ_").replaceAll("-","_τ_")}`));return i["SubArray<T>"]=`
    {
        [Property in keyof T]-?: T[Property] extends Array<infer K>
        ? T[Property] | undefined
        : Array<T[Property]> | undefined;
    }
`,i}G.generateTypes=mn;function yn(e,t,n){const i=Se(e);if(!t[i]&&(t[i]="X",e!==void 0)){const r=y(e,!1,t,n);let s=`_${e.name.local}`,u=0;for(;t[s];)s=`_${e.name.local}`+ ++u;t[s]=i,e.name.root&&(t[n(e.name)]=i),t[i]=r}}function y(e,t,n,i,r){if(typeof e>"u")return"{}";const s=e;if(s.name&&t)return n[s.name.id]||yn(s,n,i),"("+Se(s)+(r&&e.type==="element"?`& {"#": "${e.name.local}"}`:"")+")";if(e.type==="attribute"){const u="("+y(e.simpleType,!0,n,i)+")"+(e.optional&&e.default==null?" | undefined":"");return`{${e.name.local}: ${u}}`}else if(e.type==="element"){const u=e.occurence.maxOccurance==="unbounded"||e.occurence.maxOccurance>1?"[]":e.occurence.minOccurance===0?" | undefined":"",o="("+y(e.content,!0,n,i)+")";let a=`_${e.name.local}`,c=0;for(;n[a];)a=`_${e.name.local}`+ ++c;return n[a]=o,`({ ${e.name.local}: ${a+u}}`+(r?`& {"#": "${e.name.local}"}`:"")+")"}else if(e.type==="simpleType"){if(e.subType==="native")return e.base;if(e.subType==="union")return e.unions.map(u=>y(u,!0,n,i)).reduce((u,o)=>u===""?`(${o})`:`${u} | (${o}) `,"");if(e.subType==="list")throw Error("List is not yet supported");if(e.subType==="restriction"){if(e.subSubType==="enumeration")return e.values.map(u=>typeof u=="string"?`'${u}'`:u).reduce((u,o)=>u===""?`(${o})`:`${u} | (${o}) `,"");if(e.subSubType==="Number")return"number";if(e.subSubType==="pattern")return"string";if(e.subSubType==="simple")return y(e.baseType,!0,n,i)}}else if(e.type==="complexType"){const u=y(e.content,!0,n,i),o=e.attributes.map(a=>y(a,!0,n,i)).reduce((a,c)=>a===""?`(${c})`:`${a} & (${c})`,"");return o===""?u:u===""?o:`(${u}) & (${o})`}else if(e.type==="all"){if((e.occurence.maxOccurance==="unbounded"||e.occurence.maxOccurance>1)&&e.content.length>1)throw Error("Currently can`t handle more then one content in an all with occurance higher then 1");return e.content.map(u=>y(u,!0,n,i)).reduce((u,o)=>u===""?`(${o})`:`${u} & (${o})`,"")}else{if(e.type==="choise")return e.occurence.maxOccurance==="unbounded"||e.occurence.maxOccurance>1?"("+e.content.map(u=>y(u,!0,n,i)).reduce((u,o)=>u===""?`(SubArray<${o}>)`:`${u} & (SubArray<${o}>)`,"")+")":e.content.map(u=>y(u,!0,n,i,!0)).reduce((u,o)=>u===""?`(${o})`:`${u} | (${o})`,"");if(e.type==="sequence"){if((e.occurence.maxOccurance==="unbounded"||e.occurence.maxOccurance>1)&&e.content.length>1)throw Error(`Currently can't handle more then one content in an sequence with occurance higher then 1 ${JSON.stringify([e.content.length,e.occurence])}`);return e.content.map(u=>y(u,!0,n,i)).reduce((u,o)=>u===""?`(${o})`:`${u} & (${o})`,"")}else{if(e.type==="simpleContent")return e.attributes.length==0?y(e.base,!0,n,i):`{meta:${e.attributes.map(o=>y(o,!0,n,i)).reduce((o,a)=>o===""?`(${a})`:`${o} & (${a})`,"")}, value :${y(e.base,!0,n,i)}}`;if(e.type==="complexContent")return e.attributes.map(o=>y(o,!0,n,i)).concat(y(e.base,!0,n,i),y(e.content,!0,n,i)).reduce((o,a)=>o===""?`(${a})`:`${o} & (${a})`,"")}}throw Error("Not supported type"+JSON.stringify(e))}function Se(e){return e.name.id}var J={};Object.defineProperty(J,"__esModule",{value:!0});J.Parser=void 0;const wn=v;let bn=class{constructor(t){C(this,"element");this.element=t}async parse(t,n){return typeof t=="string"?this.parse(await(0,wn.parseXml)(t,n)):this.parseElement(t,this.element)}parseUnknown(t,n){if(n.type==="element")return this.parseElement(t,n);if(n.type==="simpleType")return this.parseSimpleType(t,n);if(n.type==="complexType")return this.parseComplexType(t,n)}parseElement(t,n){if(typeof t>"u"||t.name.local!==n.name.local||t.name.namespace!==n.name.namespace)return null;const i={};return i[n.name.local]=n.content?this.parseUnknown(t,n.content):{},i}parseChoiceType(t,n,i){const r=(s,u,o)=>{let a=null,c=o.index;for(let l=0;l<u.content.length;l++){const f=u.content[l];if(f.type==="element")if(f.occurence.maxOccurance==="unbounded"||f.occurence.maxOccurance>1){let p=0,d=null;for(;;){const b=this.parseElement(s.children[c],f);if(b===null||p>f.occurence.maxOccurance)break;if(d==null){const _=Object.keys(b)[0];d={},d[_]=[]}const O=Object.keys(b)[0];c++,p++,d[O]=[...d[O],b[O]]}if(d==null)continue;const g=Object.keys(d)[0];if(d[g].length<f.occurence.minOccurance)continue;a={...a,...d};break}else{const p=this.parseElement(s.children[c],f);if(p===null)continue;c++;const d=Object.keys(p);if(d.length==1){const g=d[0];p["#"]=g}a=p;break}else if(f.type==="all"){const p={index:c},d=this.parseAllType(s,f,p);if(d===null)continue;c=p.index,a=d;break}else if(f.type==="choise"){const p={index:c},d=this.parseChoiceType(s,f,p);if(d===null)continue;c=p.index,a=d;break}else if(f.type==="sequence"){const p={index:c},d=this.parseSequenceType(s,f,p);if(d===null)continue;c=p.index,a=d;break}}return a!=null&&(o.index=c),a};if(n.occurence.maxOccurance==="unbounded"||n.occurence.maxOccurance>1){const s={};for(;;){const o=r(t,n,i);if(o!==null)for(const c of Object.keys(o))typeof s[c]>"u"&&(s[c]=[]),s[c].push(o[c]);const a=Object.values(s).map(c=>c.length).reduce((c,l)=>c+l,0);if(o===null||a===n.occurence.maxOccurance)break}const u=Object.entries(s).filter(([o])=>o!=="#").map(o=>o[1].length).reduce((o,a)=>o+a,0);return u<n.occurence.minOccurance||u>n.occurence.maxOccurance?null:s}else if(n.occurence.minOccurance===0){const s=r(t,n,i);return s===null?{}:s}else return r(t,n,i)}parseSequenceType(t,n,i){let r={},s=i.index;for(let u=0;u<n.content.length;u++){const o=n.content[u];if(o.type==="element")if(o.occurence.maxOccurance==="unbounded"||o.occurence.maxOccurance>1){let a=0,c=null;for(;;){const f=this.parseElement(t.children[s],o);if(f===null||a>o.occurence.maxOccurance)break;if(c==null){const d=Object.keys(f)[0];c={},c[d]=[]}const p=Object.keys(f)[0];s++,a++,c[p]=[...c[p],f[p]]}if(c==null){const f={};f[o.name.local]=[],r={...r,...f};continue}const l=Object.keys(c)[0];if(c[l].length<o.occurence.minOccurance)continue;r={...r,...c};continue}else{const a=this.parseElement(t.children[s],o);if(a===null){if(o.occurence.minOccurance==0)continue;return null}s++,r={...r,...a}}else if(o.type==="all"){const a={index:s},c=this.parseAllType(t,o,a);if(c===null)return null;s=a.index,r={...r,...c}}else if(o.type==="choise"){const a={index:s},c=this.parseChoiceType(t,o,a);if(c===null)return null;s=a.index,r={...r,...c}}else if(o.type==="sequence"){const a={index:s},c=this.parseSequenceType(t,o,a);if(c===null)return null;s=a.index,r={...r,...c}}}return i.index=s,r}parseAllType(t,n,i){let r={},s=i.index;for(let u=0;u<n.content.length;u++){const o=n.content[u];if(o.type==="element")if(o.occurence.maxOccurance==="unbounded"||o.occurence.maxOccurance>1){let a=0,c=null;for(;;){const f=this.parseElement(t.children[s],o);if(f===null||a>o.occurence.maxOccurance)break;if(c==null){const d=Object.keys(f)[0];c={},c[d]=[]}const p=Object.keys(f)[0];s++,a++,c[p]=[...c[p],f[p]]}if(c==null)continue;const l=Object.keys(c)[0];if(c[l].length<o.occurence.minOccurance)continue;r={...r,...c};continue}else{const a=this.parseElement(t.children[s],o);if(a===null)return null;s++,r={...r,...a}}else if(o.type==="all"){const a={index:s},c=this.parseAllType(t,o,a);if(c===null)return null;s=a.index,r={...r,...c}}else if(o.type==="choise"){const a={index:s},c=this.parseChoiceType(t,o,a);if(c===null)return null;s=a.index,r={...r,...c}}else if(o.type==="sequence"){const a={index:s},c=this.parseSequenceType(t,o,a);if(c===null)return null;s=a.index,r={...r,...c}}}return i.index=s,r}parseComplexType(t,n){let i={};if(!(typeof n.content>"u")){if(n.content.type==="simpleContent")return this.parseSimpleContent(t,n.content);if(n.content.type==="complexContent")return this.parseComplexContent(t,n.content);if(n.content.type==="all"){const r=this.parseAllType(t,n.content,{index:0});if(r===null)return null;i={...r,...i}}else if(n.content.type==="choise"){const r=this.parseChoiceType(t,n.content,{index:0});if(r===null)return null;i={...r,...i}}else if(n.content.type==="sequence"){const r=this.parseSequenceType(t,n.content,{index:0});if(r===null)return null;i={...r,...i}}}for(const r of n.attributes){const s=t.attributes[r.name.local];let u=typeof r.simpleType>"u"?s:this.parseSimpleType(s,r.simpleType);if(u===null){if(r.default!==void 0)u=this.parseSimpleType(r.default,r.simpleType);else if(!r.optional)return console.log(`Missing required attribute ${JSON.stringify(r)}
	${JSON.stringify(t.attributes)}`),null}u!==null&&(i[r.name.local]=u)}return i}parseSimpleContent(t,n){const i=n.base.type==="simpleType"?this.parseSimpleType(t,n.base):this.parseComplexType(t,n.base);if(n.attributes.length==0)return i;{const r={};for(const s of n.attributes){const u=t.attributes[s.name.local];let o=typeof s.simpleType>"u"?u:this.parseSimpleType(u,s.simpleType);if(o===null){if(s.default!==void 0)o=this.parseSimpleType(s.default,s.simpleType);else if(!s.optional)return console.log(`Missing required attribute ${JSON.stringify(s)}
	${JSON.stringify(t.attributes)}`),null}o!==null&&(r[s.name.local]=o)}return{meta:r,value:i}}}parseComplexContent(t,n){const i=n.base.type==="simpleType"?this.parseSimpleType(t,n.base):this.parseComplexType(t,n.base);let r={};if(n.content){if(n.content.type==="all"){const u=this.parseAllType(t,n.content,{index:0});if(u===null)return null;r={...u,...r}}else if(n.content.type==="choise"){const u=this.parseChoiceType(t,n.content,{index:0});if(u===null)return null;r={...u,...r}}else if(n.content.type==="sequence"){const u=this.parseSequenceType(t,n.content,{index:0});if(u===null)return null;r={...u,...r}}}const s={};for(const u of n.attributes){const o=t.attributes[u.name.local];let a=typeof u.simpleType>"u"?o:this.parseSimpleType(o,u.simpleType);if(a===null){if(u.default!==void 0)a=this.parseSimpleType(u.default,u.simpleType);else if(!u.optional)return console.log(`Missing required attribute ${JSON.stringify(u)}
	${JSON.stringify(t.attributes)}`),null}a!==null&&(s[u.name.local]=a)}return{...r,...s,...i}}parseSimpleType(t,n){if(typeof t>"u")return null;const i=typeof t=="string"?t:t.text;if(typeof i>"u")throw Error("should not hapen?"+JSON.stringify(t));if(n.subType==="list")throw Error("List is not implemented");if(n.subType==="native"){if(n.base)if(n.base==="boolean"){const r=de(i);return typeof r>"u"?null:r}else return n.base==="number"&&Y(i)?parseFloat(i):n.base==="string"?i:null}else if(n.subType==="restriction")if(n.subSubType==="Number"){if(!Y(i))return null;const r=parseFloat(i);return typeof n.maxInclusive<"u"&&r>n.maxInclusive||typeof n.maxExclusive<"u"&&r>=n.maxExclusive||typeof n.minExclusive<"u"&&r<=n.minExclusive||typeof n.minInclusive<"u"&&r<n.minInclusive?null:r}else if(n.subSubType==="enumeration"){const r=this.getTypeOfSimpleType(n.baseType);if(r==="boolean"){const s=de(i);return typeof s>"u"||!n.values.includes(s)?null:s}else if(r==="number"){if(!Y(i))return null;const s=parseFloat(i);return!n.values.includes(s)&&!n.values.includes(i)?null:s}else if(r==="string")return n.values.includes(i)?i:null}else{if(n.subSubType==="pattern")return n.pattern.test(i)?i:null;if(n.subSubType==="simple")return this.parseSimpleType(t,n.baseType)}else if(n.subType==="union"){for(let r=0;r<n.unions.length;r++){const s=n.unions[r],u=this.parseSimpleType(t,s);if(u!==null)return u}return null}throw Error("unsupported?")}getTypeOfSimpleType(t){if(t.subType==="list")throw Error("List is not implemented");if(t.subType==="native")return t.base;if(t.subType==="restriction"){if(t.subSubType==="Number")return"number";if(t.subSubType==="enumeration")return this.getTypeOfSimpleType(t.baseType);if(t.subSubType==="pattern")return"string";if(t.subSubType==="simple")return this.getTypeOfSimpleType(t.baseType)}else if(t.subType==="union"){for(let n=0;n<t.unions.length;n++){const i=[...new Set(t.unions.map(r=>this.getTypeOfSimpleType(r)))];if(i.length!==1)throw Error("Not support union with diferent types. yet...");return i[0]}throw Error("Not support union with no types. yet...")}throw Error("unsupported?")}};J.Parser=bn;function de(e){if((e==null?void 0:e.toLocaleLowerCase())==="true"||(e==null?void 0:e.toLocaleLowerCase())==="false")return e.toLocaleLowerCase()==="true"}function Y(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}var Tn=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($,"__esModule",{value:!0});$.toTsTypes=vn=$.Parser=$.generateTypes=$.parseSchemas=void 0;const Nn=Tn(Q),En=G,On=J;$.parseSchemas=Nn.default;$.generateTypes=En.generateTypes;var vn=$.Parser=On.Parser;function Sn(e){return Object.entries(e).sort((t,n)=>t[0].localeCompare(n[0])).map(t=>` ${t[0].startsWith("ι")?"":"export"} type ${t[0]} = ${t[1]}
`).reduce((t,n)=>t+`
`+n,`/* eslint-disable @typescript-eslint/ban-types */

`)}$.toTsTypes=Sn;export{vn as P,P as c,Pn as g,Ce as r};
